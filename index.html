<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Quiz Test</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    .question-img { max-width: 100%; margin-bottom: 10px; }
    .options label { display: block; padding: 8px; border: 1px solid #ccc; margin: 4px 0; border-radius: 6px; }
    .correct { background: #d4edda; border-color: #28a745; }
    .wrong { background: #f8d7da; border-color: #dc3545; }
    .answer-info { margin-top: 6px; font-weight: bold; }
    .answer-correct { color: green; }
    .answer-your { color: blue; }

    .nav-buttons { margin-top: 15px; display: flex; justify-content: space-between; gap: 10px; flex-wrap: wrap; }
    button {
      padding: 8px 14px;
      border: 2px solid transparent;
      border-radius: 6px;
      cursor: pointer;
      font-weight: bold;
      background: #fff;
    }
    .btn-prev { border-color: gold; color: #444; }
    .btn-flag { border-color: red; color: red; }
    .btn-next { border-color: green; color: green; }
    .btn-skip { border-color: blue; color: blue; }
  </style>
</head>
<body>
  <div id="quiz"></div>

  <script>
    // ✅ Sample question images
    let questions = [
      { image: "https://via.placeholder.com/300x150?text=Q1" },
      { image: "https://via.placeholder.com/300x150?text=Q2" }
    ];

    // ✅ Extracted Answer Key from PDF last page (simulation here)
    let pdfLastPageText = `
      Que.  1  2  3  4  5  6
      Ans.  C  C  A  B  A  B
      Que.  7  8  9  10 11 12
      Ans.  D  D  B  D  A  C
    `;

    // Universal extractor for table format
    let regex = /(\d+)\s+([A-Da-d])/g;
    let match;
    let answerKey = {};

    while ((match = regex.exec(pdfLastPageText)) !== null) {
      let qNo = parseInt(match[1]);
      let ans = match[2].toUpperCase();
      answerKey[qNo] = ans;
    }

    // ✅ User chosen answers (demo)
    let answers = { 0: "B", 1: "C" };

    let quizDiv = document.getElementById("quiz");
    let current = 0;

    function showScoreQ(i) {
      let q = questions[i];
      let corr = answerKey[i+1] || "Not Available";
      let chosen = answers[i] || "Not Answered";
      let opts = ["A","B","C","D"];

      quizDiv.innerHTML = `
        <div class="question">
          <img src="${q.image}" class="question-img">
          <div class="options">
            ${opts.map(o=>{
              let cls = "";
              if(corr && corr !== "Not Available"){
                if(o == corr) cls = "correct";
                if(chosen == o && chosen != corr) cls = "wrong";
              }
              return `<label class="${cls}">Option ${o}</label>`;
            }).join("")}
          </div>
          <div class="answer-info answer-correct">✔ Correct Answer: ${corr}</div>
          <div class="answer-info answer-your">✎ You Choose: ${chosen}</div>
        </div>
        <div class="nav-buttons">
          <button class="btn-prev" onclick="prevQ()">Previous</button>
          <button class="btn-flag" onclick="flagQ()">Flag for Review</button>
          <button class="btn-next" onclick="nextQ()">Next</button>
          <button class="btn-skip" onclick="skipQ()">Skip</button>
        </div>
      `;
    }

    function prevQ(){ if(current>0){ current--; showScoreQ(current); } }
    function nextQ(){ if(current<questions.length-1){ current++; showScoreQ(current); } }
    function skipQ(){ alert("Skipped Q"+(current+1)); }
    function flagQ(){ alert("Flagged Q"+(current+1)); }

    // Start quiz
    showScoreQ(current);
  </script>
</body>
</html>
